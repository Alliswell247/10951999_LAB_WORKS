# task2_color_space_histogram.py

import cv2
from matplotlib import pyplot as plt

# Load the image
image = cv2.imread('photo.jpg')

if image is None:
    print("Error: Could not load image.")
    exit()

# Convert to Grayscale
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
cv2.imwrite("photo_grayscale.jpg", gray)

# Convert to HSV
hsv = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)
cv2.imwrite("photo_hsv.jpg", hsv)

# Convert to LAB
lab = cv2.cvtColor(image, cv2.COLOR_BGR2Lab)
cv2.imwrite("photo_lab.jpg", lab)

# Display all color space conversions
plt.figure(figsize=(12, 8))

plt.subplot(2, 2, 1)
plt.title("Original (BGR)")
plt.imshow(cv2.cvtColor(image, cv2.COLOR_BGR2RGB))
plt.axis('off')

plt.subplot(2, 2, 2)
plt.title("Grayscale")
plt.imshow(gray, cmap='gray')
plt.axis('off')

plt.subplot(2, 2, 3)
plt.title("HSV")
plt.imshow(cv2.cvtColor(hsv, cv2.COLOR_HSV2RGB))
plt.axis('off')

plt.subplot(2, 2, 4)
plt.title("LAB")
plt.imshow(cv2.cvtColor(lab, cv2.COLOR_Lab2RGB))
plt.axis('off')

plt.tight_layout()
plt.show()

# Plot grayscale histogram
plt.figure()
plt.title("Grayscale Histogram")
plt.xlabel("Pixel value")
plt.ylabel("Frequency")
plt.hist(gray.ravel(), bins=256, range=[0,256], color='gray')
plt.grid(True)
plt.show()
